# MASTER PLAN: E-SANGHA WEB PORTAL

## K·∫ø Ho·∫°ch T·ªïng Th·ªÉ X√¢y D·ª±ng C·ªïng Th√¥ng Tin ƒêi·ªán T·ª≠
### H·ªçc vi·ªán Ph·∫≠t gi√°o Nam t√¥ng Khmer - C·∫ßn Th∆°

---

> [!IMPORTANT]
> **T·∫ßm nh√¨n:** X√¢y d·ª±ng n·ªÅn t·∫£ng s·ªë h√≥a ƒë·∫≥ng c·∫•p ƒë·∫°i h·ªçc, mang b·∫£n s·∫Øc vƒÉn h√≥a Ph·∫≠t gi√°o TheravƒÅda Khmer, ph·ª•c v·ª• h∆°n 400 TƒÉng sinh v√† c·ªông ƒë·ªìng Ph·∫≠t t·ª≠ Nam B·ªô.

---

## üìã M·ª§C L·ª§C

1. [T·ªïng Quan Chuy·ªÉn ƒê·ªïi](#1-t·ªïng-quan-chuy·ªÉn-ƒë·ªïi)
2. [Ki·∫øn Tr√∫c Sitemap](#2-ki·∫øn-tr√∫c-sitemap)
3. [Thi·∫øt K·∫ø Nghi·ªáp V·ª• & Logic](#3-thi·∫øt-k·∫ø-nghi·ªáp-v·ª•--logic)
4. [UI/UX Concept](#4-uiux-concept)
5. [Ki·∫øn Tr√∫c K·ªπ Thu·∫≠t](#5-ki·∫øn-tr√∫c-k·ªπ-thu·∫≠t)
6. [L·ªô Tr√¨nh Tri·ªÉn Khai](#6-l·ªô-tr√¨nh-tri·ªÉn-khai)

---

## 1. T·ªïng Quan Chuy·ªÉn ƒê·ªïi

### 1.1. So s√°nh M√¥ h√¨nh C≈© vs M·ªõi

| Ti√™u ch√≠ | Mobile App (C≈©) | Web Portal (M·ªõi) |
|----------|-----------------|------------------|
| **N·ªÅn t·∫£ng** | Flutter (iOS/Android) | Next.js + Django |
| **Ki·∫øn tr√∫c** | Offline-first Sync | Cloud-Native 100% Online |
| **ƒê·ªëi t∆∞·ª£ng** | N·ªôi b·ªô H·ªçc vi·ªán | C√¥ng ch√∫ng + N·ªôi b·ªô |
| **SEO** | Kh√¥ng c√≥ | SSR t·ªëi ∆∞u |
| **B·∫£o tr√¨** | Ph·ª©c t·∫°p (ƒëa platform) | ƒê∆°n gi·∫£n h√≥a |

### 1.2. L·ª£i √≠ch Chi·∫øn l∆∞·ª£c

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  L·ª¢I √çCH CHUY·ªÇN ƒê·ªîI                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                        ‚îÇ
‚îÇ  ‚úÖ SEO & MARKETING                                    ‚îÇ
‚îÇ     ‚Ä¢ Tin t·ª©c Ph·∫≠t s·ª± ƒë∆∞·ª£c Google index               ‚îÇ
‚îÇ     ‚Ä¢ Tuy·ªÉn sinh ti·∫øp c·∫≠n r·ªông h∆°n                    ‚îÇ
‚îÇ     ‚Ä¢ X√¢y d·ª±ng th∆∞∆°ng hi·ªáu s·ªë                         ‚îÇ
‚îÇ                                                        ‚îÇ
‚îÇ  ‚úÖ ACCESSIBILITY                                      ‚îÇ
‚îÇ     ‚Ä¢ Truy c·∫≠p m·ªçi thi·∫øt b·ªã (PC, tablet, mobile)      ‚îÇ
‚îÇ     ‚Ä¢ H√≤a th∆∞·ª£ng c√≥ th·ªÉ d√πng iPad d·ªÖ d√†ng             ‚îÇ
‚îÇ     ‚Ä¢ Kh√¥ng c·∫ßn c√†i ƒë·∫∑t app                           ‚îÇ
‚îÇ                                                        ‚îÇ
‚îÇ  ‚úÖ MAINTAINABILITY                                    ‚îÇ
‚îÇ     ‚Ä¢ M·ªôt codebase duy nh·∫•t                           ‚îÇ
‚îÇ     ‚Ä¢ Deploy t·ª©c th√¨ (kh√¥ng ch·ªù App Store)            ‚îÇ
‚îÇ     ‚Ä¢ D·ªÖ c·∫≠p nh·∫≠t, s·ª≠a l·ªói                            ‚îÇ
‚îÇ                                                        ‚îÇ
‚îÇ  ‚úÖ DATA INTEGRITY                                     ‚îÇ
‚îÇ     ‚Ä¢ D·ªØ li·ªáu t·∫≠p trung 100%                          ‚îÇ
‚îÇ     ‚Ä¢ Lo·∫°i b·ªè conflict sync                           ‚îÇ
‚îÇ     ‚Ä¢ Backup ƒë∆°n gi·∫£n                                 ‚îÇ
‚îÇ                                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. Ki·∫øn Tr√∫c Sitemap

### 2.1. Ph√¢n h·ªá H·ªá th·ªëng

```mermaid
graph TB
    subgraph Public["üåê PUBLIC PORTAL (C√¥ng ch√∫ng)"]
        HOME[Trang ch·ªß]
        ABOUT[Gi·ªõi thi·ªáu]
        NEWS[Tin t·ª©c Ph·∫≠t s·ª±]
        ADMISSION[Tuy·ªÉn sinh]
        LIBRARY_PUB[Th∆∞ vi·ªán s·ªë]
        CONTACT[Li√™n h·ªá]
    end
    
    subgraph Internal["üîê INTERNAL PORTAL (N·ªôi b·ªô - ƒêƒÉng nh·∫≠p)"]
        DASHBOARD[Dashboard]
        ACADEMIC[Qu·∫£n l√Ω H·ªçc v·ª•]
        ADMIN[H√†nh ch√≠nh ƒëi·ªán t·ª≠]
        LIBRARY_INT[Th∆∞ vi·ªán n·ªôi b·ªô]
        PROFILE[H·ªì s∆° c√° nh√¢n]
    end
    
    HOME --> ABOUT
    HOME --> NEWS
    HOME --> ADMISSION
    HOME --> LIBRARY_PUB
    HOME --> CONTACT
    
    DASHBOARD --> ACADEMIC
    DASHBOARD --> ADMIN
    DASHBOARD --> LIBRARY_INT
    DASHBOARD --> PROFILE
```

---

### 2.2. PUBLIC PORTAL - Sitemap Chi Ti·∫øt

```
üåê esangha.edu.vn (Public)
‚îÇ
‚îú‚îÄ‚îÄ üè† / (Trang ch·ªß)
‚îÇ   ‚îú‚îÄ‚îÄ Hero Banner (gi·ªõi thi·ªáu ng·∫Øn)
‚îÇ   ‚îú‚îÄ‚îÄ S·ª© m·ªánh & T·∫ßm nh√¨n
‚îÇ   ‚îú‚îÄ‚îÄ Th·ªëng k√™ (S·ªë TƒÉng sinh, Kh√≥a h·ªçc, ...)
‚îÇ   ‚îú‚îÄ‚îÄ Tin t·ª©c n·ªïi b·∫≠t (3 b√†i m·ªõi nh·∫•t)
‚îÇ   ‚îî‚îÄ‚îÄ CTA: Tuy·ªÉn sinh | ƒêƒÉng nh·∫≠p
‚îÇ
‚îú‚îÄ‚îÄ üìñ /gioi-thieu
‚îÇ   ‚îú‚îÄ‚îÄ L·ªãch s·ª≠ H·ªçc vi·ªán
‚îÇ   ‚îú‚îÄ‚îÄ C∆° c·∫•u t·ªï ch·ª©c
‚îÇ   ‚îú‚îÄ‚îÄ Ban Gi√°m hi·ªáu
‚îÇ   ‚îú‚îÄ‚îÄ ƒê·ªôi ng≈© Gi√°o th·ªç
‚îÇ   ‚îî‚îÄ‚îÄ C∆° s·ªü v·∫≠t ch·∫•t
‚îÇ
‚îú‚îÄ‚îÄ üì∞ /tin-tuc
‚îÇ   ‚îú‚îÄ‚îÄ Danh m·ª•c:
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Tin H·ªçc vi·ªán
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Ph·∫≠t s·ª± c·ªông ƒë·ªìng
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ L·ªÖ h·ªôi Khmer
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Th√¥ng b√°o
‚îÇ   ‚îú‚îÄ‚îÄ B√†i vi·∫øt chi ti·∫øt (/tin-tuc/[slug])
‚îÇ   ‚îî‚îÄ‚îÄ T√¨m ki·∫øm & L·ªçc
‚îÇ
‚îú‚îÄ‚îÄ üéì /tuyen-sinh
‚îÇ   ‚îú‚îÄ‚îÄ Th√¥ng tin tuy·ªÉn sinh nƒÉm hi·ªán t·∫°i
‚îÇ   ‚îú‚îÄ‚îÄ ƒê·ªëi t∆∞·ª£ng & ƒêi·ªÅu ki·ªán
‚îÇ   ‚îú‚îÄ‚îÄ Quy tr√¨nh ƒëƒÉng k√Ω
‚îÇ   ‚îú‚îÄ‚îÄ Form ƒëƒÉng k√Ω tr·ª±c tuy·∫øn
‚îÇ   ‚îî‚îÄ‚îÄ FAQs Tuy·ªÉn sinh
‚îÇ
‚îú‚îÄ‚îÄ üìö /thu-vien
‚îÇ   ‚îú‚îÄ‚îÄ Kinh ƒëi·ªÉn PƒÅli-Khmer (Public view)
‚îÇ   ‚îú‚îÄ‚îÄ T√†i li·ªáu nghi√™n c·ª©u
‚îÇ   ‚îú‚îÄ‚îÄ B√†i gi·∫£ng video (n·∫øu public)
‚îÇ   ‚îî‚îÄ‚îÄ T·ª´ ƒëi·ªÉn PƒÅli-Khmer-Vi·ªát
‚îÇ
‚îú‚îÄ‚îÄ üìÖ /lich-phap
‚îÇ   ‚îú‚îÄ‚îÄ L·ªãch Chhankitek t∆∞∆°ng t√°c
‚îÇ   ‚îú‚îÄ‚îÄ Ng√†y Uposatha s·∫Øp t·ªõi
‚îÇ   ‚îî‚îÄ‚îÄ L·ªÖ h·ªôi Ph·∫≠t gi√°o trong nƒÉm
‚îÇ
‚îî‚îÄ‚îÄ üìû /lien-he
    ‚îú‚îÄ‚îÄ Th√¥ng tin li√™n h·ªá
    ‚îú‚îÄ‚îÄ B·∫£n ƒë·ªì v·ªã tr√≠
    ‚îî‚îÄ‚îÄ Form g·ª≠i tin nh·∫Øn
```

---

### 2.3. INTERNAL PORTAL - Sitemap Chi Ti·∫øt

```
üîê esangha.edu.vn/app (Internal - Requires Login)
‚îÇ
‚îú‚îÄ‚îÄ üìä /app/dashboard
‚îÇ   ‚îú‚îÄ‚îÄ [H√≤a th∆∞·ª£ng] T·ªïng quan ph√™ duy·ªát, b√°o c√°o
‚îÇ   ‚îú‚îÄ‚îÄ [Gi√°o th·ªç] L·ªõp ph·ª• tr√°ch, ƒëi·ªÉm c·∫ßn nh·∫≠p
‚îÇ   ‚îî‚îÄ‚îÄ [TƒÉng sinh] L·ªãch h√¥m nay, ƒëi·ªÉm, th√¥ng b√°o
‚îÇ
‚îú‚îÄ‚îÄ üë• /app/ho-so (Qu·∫£n l√Ω H·ªì s∆°)
‚îÇ   ‚îú‚îÄ‚îÄ Danh s√°ch TƒÉng sinh
‚îÇ   ‚îú‚îÄ‚îÄ Chi ti·∫øt h·ªì s∆° (/app/ho-so/[id])
‚îÇ   ‚îú‚îÄ‚îÄ T·∫°o m·ªõi / Ch·ªânh s·ª≠a
‚îÇ   ‚îú‚îÄ‚îÄ OCR Ch·ª©ng ƒëi·ªáp
‚îÇ   ‚îî‚îÄ‚îÄ Xu·∫•t b√°o c√°o
‚îÇ
‚îú‚îÄ‚îÄ üìö /app/hoc-vu (H·ªçc v·ª•)
‚îÇ   ‚îú‚îÄ‚îÄ ƒêƒÉng k√Ω m√¥n h·ªçc
‚îÇ   ‚îú‚îÄ‚îÄ Th·ªùi kh√≥a bi·ªÉu
‚îÇ   ‚îú‚îÄ‚îÄ B·∫£ng ƒëi·ªÉm (Transcript)
‚îÇ   ‚îú‚îÄ‚îÄ Qu·∫£n l√Ω l·ªõp h·ªçc (Gi√°o th·ªç)
‚îÇ   ‚îî‚îÄ‚îÄ Nh·∫≠p ƒëi·ªÉm
‚îÇ
‚îú‚îÄ‚îÄ üìù /app/don-tu (H√†nh ch√≠nh ƒëi·ªán t·ª≠)
‚îÇ   ‚îú‚îÄ‚îÄ Danh s√°ch ƒë∆°n c·ªßa t√¥i
‚îÇ   ‚îú‚îÄ‚îÄ T·∫°o ƒë∆°n m·ªõi
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ƒê∆°n xin ph√©p
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ƒê∆°n x√°c nh·∫≠n tu·ªïi h·∫°
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ƒê∆°n xin ngh·ªâ h·ªçc
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [C√°c lo·∫°i ƒë∆°n kh√°c]
‚îÇ   ‚îú‚îÄ‚îÄ Theo d√µi ti·∫øn ƒë·ªô
‚îÇ   ‚îî‚îÄ‚îÄ [Admin] Ph√™ duy·ªát ƒë∆°n
‚îÇ
‚îú‚îÄ‚îÄ üìñ /app/thu-vien (Th∆∞ vi·ªán n·ªôi b·ªô)
‚îÇ   ‚îú‚îÄ‚îÄ Kho Tipitaka ƒë·∫ßy ƒë·ªß
‚îÇ   ‚îú‚îÄ‚îÄ T√†i li·ªáu m√¥n h·ªçc
‚îÇ   ‚îú‚îÄ‚îÄ Bookmark c√° nh√¢n
‚îÇ   ‚îî‚îÄ‚îÄ T·ª´ ƒëi·ªÉn t√≠ch h·ª£p
‚îÇ
‚îú‚îÄ‚îÄ üßò /app/tu-tap (C√¥ng c·ª• tu t·∫≠p)
‚îÇ   ‚îú‚îÄ‚îÄ Timer thi·ªÅn ƒë·ªãnh
‚îÇ   ‚îú‚îÄ‚îÄ Nh·∫≠t k√Ω tu t·∫≠p (m√£ h√≥a)
‚îÇ   ‚îî‚îÄ‚îÄ Th·ªëng k√™ c√° nh√¢n
‚îÇ
‚îú‚îÄ‚îÄ üë§ /app/profile (H·ªì s∆° c√° nh√¢n)
‚îÇ   ‚îú‚îÄ‚îÄ Th√¥ng tin c√° nh√¢n
‚îÇ   ‚îú‚îÄ‚îÄ ƒê·ªïi m·∫≠t kh·∫©u
‚îÇ   ‚îú‚îÄ‚îÄ C√†i ƒë·∫∑t th√¥ng b√°o
‚îÇ   ‚îî‚îÄ‚îÄ Ng√¥n ng·ªØ hi·ªÉn th·ªã
‚îÇ
‚îî‚îÄ‚îÄ ‚öôÔ∏è /app/admin (Ch·ªâ Admin)
    ‚îú‚îÄ‚îÄ Qu·∫£n l√Ω ng∆∞·ªùi d√πng
    ‚îú‚îÄ‚îÄ Ph√¢n quy·ªÅn (RBAC)
    ‚îú‚îÄ‚îÄ C·∫•u h√¨nh h·ªá th·ªëng
    ‚îú‚îÄ‚îÄ Audit logs
    ‚îî‚îÄ‚îÄ Backup & Restore
```

---

## 3. Thi·∫øt K·∫ø Nghi·ªáp V·ª• & Logic

### 3.1. M√¥ h√¨nh "Song Tr√πng" (Dual-Profile System)

> [!NOTE]
> H·ªá th·ªëng qu·∫£n l√Ω song song 2 ƒë·ªëi t∆∞·ª£ng tr√™n c√πng c∆° s·ªü d·ªØ li·ªáu: **TƒÉng sinh (S∆∞)** v√† **C∆∞ sƒ© (Sinh vi√™n th∆∞·ªùng)**.

#### Database Schema

```sql
-- B·∫£ng ng∆∞·ªùi d√πng c∆° s·ªü (Base User)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE,
    phone VARCHAR(20),
    password_hash TEXT NOT NULL,
    user_type VARCHAR(20) CHECK (user_type IN ('monk', 'layperson')),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

-- B·∫£ng TƒÉng sinh (Monk Profile)
CREATE TABLE monk_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    
    -- Ph√°p danh ƒëa ng√¥n ng·ªØ
    dharma_name_khmer VARCHAR(100) NOT NULL,    -- ·ûó·û∑·ûÄ·üí·ûÅ·ûª ·ûú·û∏·ûö·üâ·û∂·ûÄ·üã
    dharma_name_pali VARCHAR(100),              -- Bhikkhu Vƒ´rƒÅk
    dharma_name_vietnamese VARCHAR(100),        -- T·ª≥ kheo Vir·∫Øc
    
    -- Th√¥ng tin th·∫ø t·ª•c
    secular_name VARCHAR(100),
    date_of_birth DATE,
    place_of_birth JSONB,  -- {province, district, commune}
    
    -- Th√¥ng tin Gi·ªõi lu·∫≠t
    ordination_temple VARCHAR(200),             -- Ch√πa xu·∫•t gia
    samanera_date DATE,                         -- Ng√†y th·ªç Sa-di (10 gi·ªõi)
    bhikkhu_date DATE,                          -- Ng√†y th·ªç T·ª≥ kheo (227 gi·ªõi)
    upajjhaya VARCHAR(100),                     -- Th·∫ßy t·∫ø ƒë·ªô (Preceptor)
    
    -- Documents
    ordination_certificate_url TEXT,            -- Scan ch·ª©ng ƒëi·ªáp th·ªç gi·ªõi
    photo_url TEXT,
    
    UNIQUE(user_id)
);

-- B·∫£ng C∆∞ sƒ© (Layperson Profile)
CREATE TABLE layperson_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    
    full_name VARCHAR(200) NOT NULL,
    date_of_birth DATE,
    gender VARCHAR(10),
    
    -- Th√¥ng tin c∆∞ sƒ©
    occupation VARCHAR(100),                     -- Ngh·ªÅ nghi·ªáp
    workplace VARCHAR(200),                      -- ƒê∆°n v·ªã c√¥ng t√°c
    
    -- Th√¥ng tin li√™n h·ªá
    address TEXT,
    emergency_contact JSONB,
    
    UNIQUE(user_id)
);
```

#### Logic Ph√¢n bi·ªát Hi·ªÉn th·ªã

```python
# services/profile_service.py

class ProfileService:
    @staticmethod
    def get_display_name(user: User) -> str:
        """L·∫•y t√™n hi·ªÉn th·ªã ph√π h·ª£p theo lo·∫°i ng∆∞·ªùi d√πng."""
        if user.user_type == 'monk':
            profile = MonkProfile.objects.get(user=user)
            return f"·ûó·û∑·ûÄ·üí·ûÅ·ûª {profile.dharma_name_khmer}"  # Bhikkhu [Ph√°p danh]
        else:
            profile = LaypersonProfile.objects.get(user=user)
            return profile.full_name
    
    @staticmethod
    def get_profile_card_data(user: User) -> dict:
        """Tr·∫£ v·ªÅ d·ªØ li·ªáu card profile t√πy theo lo·∫°i."""
        if user.user_type == 'monk':
            profile = MonkProfile.objects.get(user=user)
            return {
                "type": "monk",
                "name": profile.dharma_name_khmer,
                "name_pali": profile.dharma_name_pali,
                "vassa": calculate_vassa(profile.bhikkhu_date),
                "temple": profile.ordination_temple,
                "preceptor": profile.upajjhaya,
            }
        else:
            profile = LaypersonProfile.objects.get(user=user)
            return {
                "type": "layperson",
                "name": profile.full_name,
                "occupation": profile.occupation,
                "workplace": profile.workplace,
            }
```

---

### 3.2. Thu·∫≠t To√°n "H·∫° L·∫°p" (Vassa - Tu·ªïi ƒê·∫°o)

> [!IMPORTANT]
> **H·∫° l·∫°p (Vassa)** l√† s·ªë nƒÉm tu h·ªçc c·ªßa m·ªôt v·ªã S∆∞, ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n l·ªãch √Çm Khmer (Chhankitek), kh√¥ng nh·∫≠p th·ªß c√¥ng.

#### Quy t·∫Øc T√≠nh Vassa

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              QUY T·∫ÆC T√çNH TU·ªîI H·∫† (VASSA)                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                            ‚îÇ
‚îÇ  1. M·ªêC T√çNH:                                              ‚îÇ
‚îÇ     ‚Ä¢ B·∫Øt ƒë·∫ßu: R·∫±m th√°ng Asadh (Chol Vassa - Nh·∫≠p h·∫°)     ‚îÇ
‚îÇ     ‚Ä¢ K·∫øt th√∫c: R·∫±m th√°ng Assoch (Chong Vassa - Xu·∫•t h·∫°)  ‚îÇ
‚îÇ     ‚Ä¢ Th·ªùi gian: 3 th√°ng m√πa m∆∞a (Rain Retreat)           ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  2. ƒêI·ªÄU KI·ªÜN C·ªòNG 1 H·∫†:                                   ‚îÇ
‚îÇ     ‚Ä¢ ƒê√£ th·ªç T·ª≥ kheo TR∆Ø·ªöC Chol Vassa c·ªßa nƒÉm ƒë√≥          ‚îÇ
‚îÇ     ‚Ä¢ An c∆∞ ƒë·ªß 3 th√°ng (kh√¥ng vi ph·∫°m)                    ‚îÇ
‚îÇ     ‚Ä¢ Ho√†n th√†nh Chong Vassa                              ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  3. C√îNG TH·ª®C:                                             ‚îÇ
‚îÇ     vassa = s·ªë_l·∫ßn_an_c∆∞_ho√†n_th√†nh                       ‚îÇ
‚îÇ           = nƒÉm_hi·ªán_t·∫°i - nƒÉm_th·ªç_gi·ªõi (n·∫øu th·ªç tr∆∞·ªõc    ‚îÇ
‚îÇ             Chol Vassa)                                    ‚îÇ
‚îÇ                                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### Implementation Backend

```python
# services/vassa_calculator.py

from datetime import date
from .khmer_calendar import KhmerCalendar

class VassaCalculator:
    """
    T√≠nh to√°n tu·ªïi h·∫° (Vassa) d·ª±a tr√™n l·ªãch Chhankitek.
    """
    
    @staticmethod
    def calculate_vassa(bhikkhu_date: date, reference_date: date = None) -> int:
        """
        T√≠nh s·ªë nƒÉm h·∫° l·∫°p.
        
        Args:
            bhikkhu_date: Ng√†y th·ªç gi·ªõi T·ª≥ kheo (D∆∞∆°ng l·ªãch)
            reference_date: Ng√†y tham chi·∫øu (m·∫∑c ƒë·ªãnh = h√¥m nay)
        
        Returns:
            S·ªë nƒÉm h·∫° l·∫°p (Vassa count)
        """
        if reference_date is None:
            reference_date = date.today()
        
        if bhikkhu_date > reference_date:
            return 0
        
        vassa_count = 0
        year = bhikkhu_date.year
        
        while year <= reference_date.year:
            # L·∫•y ng√†y Chol Vassa (Nh·∫≠p h·∫°) c·ªßa nƒÉm ƒë√≥
            chol_vassa = KhmerCalendar.get_chol_vassa(year)
            # L·∫•y ng√†y Chong Vassa (Xu·∫•t h·∫°) c·ªßa nƒÉm ƒë√≥
            chong_vassa = KhmerCalendar.get_chong_vassa(year)
            
            # ƒêi·ªÅu ki·ªán: ƒê√£ th·ªç gi·ªõi TR∆Ø·ªöC Chol Vassa
            # V√Ä reference_date SAU Chong Vassa
            if bhikkhu_date < chol_vassa and reference_date >= chong_vassa:
                vassa_count += 1
            
            year += 1
        
        return vassa_count
    
    @staticmethod
    def get_vassa_status(bhikkhu_date: date) -> dict:
        """
        Tr·∫£ v·ªÅ th√¥ng tin chi ti·∫øt v·ªÅ tr·∫°ng th√°i Vassa.
        """
        today = date.today()
        current_year = today.year
        
        chol_vassa = KhmerCalendar.get_chol_vassa(current_year)
        chong_vassa = KhmerCalendar.get_chong_vassa(current_year)
        
        vassa_count = VassaCalculator.calculate_vassa(bhikkhu_date, today)
        
        # X√°c ƒë·ªãnh tr·∫°ng th√°i hi·ªán t·∫°i
        if chol_vassa <= today <= chong_vassa:
            status = "IN_VASSA"  # ƒêang trong m√πa An c∆∞
        elif today < chol_vassa:
            status = "PRE_VASSA"  # Ch∆∞a ƒë·∫øn m√πa An c∆∞
        else:
            status = "POST_VASSA"  # ƒê√£ qua m√πa An c∆∞
        
        return {
            "vassa_count": vassa_count,
            "vassa_display": f"{vassa_count} h·∫°",
            "vassa_khmer": f"{vassa_count} ·ûú·ûü·üí·ûü·û∂",
            "status": status,
            "next_chol_vassa": chol_vassa if today < chol_vassa 
                               else KhmerCalendar.get_chol_vassa(current_year + 1),
            "bhikkhu_date": bhikkhu_date,
            "years_since_ordination": (today - bhikkhu_date).days // 365,
        }


class KhmerCalendar:
    """
    X·ª≠ l√Ω l·ªãch Chhankitek v√† t√≠nh ng√†y l·ªÖ Ph·∫≠t gi√°o.
    """
    
    # B·∫£ng tra c·ª©u ng√†y Chol Vassa (ƒë√£ t√≠nh s·∫µn)
    # Th·ª±c t·∫ø c·∫ßn thu·∫≠t to√°n ph·ª©c t·∫°p h∆°n
    CHOL_VASSA_TABLE = {
        2024: date(2024, 7, 21),   # R·∫±m th√°ng Asadh 2024
        2025: date(2025, 7, 10),   # R·∫±m th√°ng Asadh 2025
        2026: date(2026, 7, 29),   # R·∫±m th√°ng Asadh 2026
        # ... ti·∫øp t·ª•c cho c√°c nƒÉm sau
    }
    
    CHONG_VASSA_TABLE = {
        2024: date(2024, 10, 17),  # R·∫±m th√°ng Assoch 2024
        2025: date(2025, 10, 6),   # R·∫±m th√°ng Assoch 2025
        2026: date(2026, 10, 25),  # R·∫±m th√°ng Assoch 2026
    }
    
    @classmethod
    def get_chol_vassa(cls, year: int) -> date:
        """L·∫•y ng√†y Nh·∫≠p h·∫° c·ªßa nƒÉm."""
        return cls.CHOL_VASSA_TABLE.get(year, cls._calculate_chol_vassa(year))
    
    @classmethod
    def get_chong_vassa(cls, year: int) -> date:
        """L·∫•y ng√†y Xu·∫•t h·∫° c·ªßa nƒÉm."""
        return cls.CHONG_VASSA_TABLE.get(year, cls._calculate_chong_vassa(year))
    
    @classmethod
    def _calculate_chol_vassa(cls, year: int) -> date:
        """
        Thu·∫≠t to√°n t√≠nh Chol Vassa d·ª±a tr√™n c√¥ng th·ª©c Aharkun.
        (C·∫ßn t√≠ch h·ª£p API l·ªãch thi√™n vƒÉn ho·∫∑c th∆∞ vi·ªán chuy√™n d·ª•ng)
        """
        # TODO: T√≠ch h·ª£p v·ªõi astronomical calculation API
        # T·∫°m th·ªùi ∆∞·ªõc t√≠nh: R·∫±m th√°ng 8 Khmer ‚âà gi·ªØa th√°ng 7 D∆∞∆°ng
        return date(year, 7, 15)
```

---

### 3.3. Quy Tr√¨nh Duy·ªát ƒê∆°n (E-Approval Workflow)

> [!NOTE]
> S·ªë h√≥a quy tr√¨nh **"Th∆∞·ª£ng l·ªánh h·∫° h√†nh"** - TƒÉng sinh g·ª≠i ƒë∆°n ‚Üí H√≤a th∆∞·ª£ng/Gi√°o th·ªç ph√™ duy·ªát tr√™n Web.

#### S∆° ƒë·ªì Quy tr√¨nh

```mermaid
stateDiagram-v2
    [*] --> Draft: TƒÉng sinh t·∫°o ƒë∆°n
    Draft --> Submitted: G·ª≠i ƒë∆°n
    
    Submitted --> ReviewByTeacher: Gi√°o th·ªç xem x√©t
    ReviewByTeacher --> NeedsRevision: Y√™u c·∫ßu ch·ªânh s·ª≠a
    ReviewByTeacher --> ApprovedByTeacher: Gi√°o th·ªç ƒë·ªìng √Ω
    
    NeedsRevision --> Draft: TƒÉng sinh s·ª≠a
    
    ApprovedByTeacher --> ReviewByAbbot: Chuy·ªÉn H√≤a th∆∞·ª£ng
    ReviewByAbbot --> Rejected: T·ª´ ch·ªëi
    ReviewByAbbot --> Approved: Ph√™ duy·ªát
    
    Rejected --> [*]
    Approved --> Completed: Ch√®n ch·ªØ k√Ω s·ªë/QR
    Completed --> [*]
```

#### Lo·∫°i ƒê∆°n H·ªó Tr·ª£

| Lo·∫°i ƒë∆°n | M√¥ t·∫£ | Ng∆∞·ªùi duy·ªát | SLA |
|----------|-------|-------------|-----|
| **ƒê∆°n xin ph√©p v·∫Øng m·∫∑t** | Xin ph√©p ngh·ªâ bu·ªïi h·ªçc/l·ªÖ | Gi√°o th·ªç | 24h |
| **ƒê∆°n x√°c nh·∫≠n tu·ªïi h·∫°** | X√°c nh·∫≠n s·ªë nƒÉm tu h·ªçc ch√≠nh th·ª©c | H√≤a th∆∞·ª£ng | 3 ng√†y |
| **ƒê∆°n xin ngh·ªâ h·ªçc d√†i h·∫°n** | T·∫°m ng∆∞ng h·ªçc 1 k·ª≥ tr·ªü l√™n | H√≤a th∆∞·ª£ng | 7 ng√†y |
| **ƒê∆°n chuy·ªÉn l·ªõp/kh√≥a** | ƒê·ªÅ ngh·ªã chuy·ªÉn l·ªõp | Gi√°o th·ªç ‚Üí HT | 5 ng√†y |
| **ƒê∆°n xin gi·∫•y gi·ªõi thi·ªáu** | Gi·ªõi thi·ªáu ƒëi h·ªçc t·∫°i n∆∞·ªõc ngo√†i | H√≤a th∆∞·ª£ng | 7 ng√†y |

#### Database Schema

```sql
-- B·∫£ng ƒë·ªãnh nghƒ©a lo·∫°i ƒë∆°n
CREATE TABLE petition_types (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    code VARCHAR(50) UNIQUE NOT NULL,  -- 'leave_request', 'vassa_confirmation'
    name_vi VARCHAR(100) NOT NULL,
    name_km VARCHAR(100),              -- T√™n ti·∫øng Khmer
    description TEXT,
    approval_chain JSONB NOT NULL,     -- ["teacher", "abbot"]
    sla_hours INTEGER DEFAULT 72,
    template_content TEXT,             -- Template HTML/Markdown
    requires_attachment BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true
);

-- B·∫£ng ƒë∆°n t·ª´
CREATE TABLE petitions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    petition_number VARCHAR(50) UNIQUE, -- HV-2026-00001
    
    type_id UUID REFERENCES petition_types(id),
    requester_id UUID REFERENCES users(id),
    
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    attachments JSONB,                  -- [{name, url, type}]
    
    status VARCHAR(30) CHECK (status IN (
        'draft', 'submitted', 'in_review', 
        'needs_revision', 'approved', 'rejected', 'completed'
    )) DEFAULT 'draft',
    
    -- Th√¥ng tin ph√™ duy·ªát
    current_approver_id UUID REFERENCES users(id),
    approved_by JSONB,                  -- [{user_id, role, timestamp, signature}]
    rejection_reason TEXT,
    
    -- VƒÉn b·∫£n ƒë·∫ßu ra
    final_document_url TEXT,            -- PDF ƒë√£ k√Ω s·ªë
    qr_code_url TEXT,                   -- QR code x√°c th·ª±c
    digital_signature JSONB,            -- Th√¥ng tin ch·ªØ k√Ω s·ªë
    
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    submitted_at TIMESTAMP,
    completed_at TIMESTAMP
);

-- B·∫£ng l·ªãch s·ª≠ x·ª≠ l√Ω ƒë∆°n
CREATE TABLE petition_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    petition_id UUID REFERENCES petitions(id) ON DELETE CASCADE,
    
    action VARCHAR(50) NOT NULL,        -- 'submit', 'approve', 'reject', 'revise'
    actor_id UUID REFERENCES users(id),
    actor_role VARCHAR(50),
    
    from_status VARCHAR(30),
    to_status VARCHAR(30),
    comment TEXT,
    
    created_at TIMESTAMP DEFAULT NOW()
);
```

#### API Endpoints

```python
# api/v1/petitions.py

@router.post("/petitions")
async def create_petition(data: PetitionCreate, user: User = Depends(get_current_user)):
    """T·∫°o ƒë∆°n m·ªõi (Draft)."""
    pass

@router.post("/petitions/{petition_id}/submit")
async def submit_petition(petition_id: UUID, user: User = Depends(get_current_user)):
    """G·ª≠i ƒë∆°n ƒë·ªÉ x√©t duy·ªát."""
    pass

@router.post("/petitions/{petition_id}/approve")
async def approve_petition(
    petition_id: UUID, 
    data: ApprovalData,
    user: User = Depends(require_role(["teacher", "abbot"]))
):
    """Ph√™ duy·ªát ƒë∆°n + k√Ω s·ªë."""
    pass

@router.post("/petitions/{petition_id}/reject")
async def reject_petition(
    petition_id: UUID,
    data: RejectionData,
    user: User = Depends(require_role(["teacher", "abbot"]))
):
    """T·ª´ ch·ªëi ƒë∆°n."""
    pass

@router.get("/petitions/{petition_id}/document")
async def get_signed_document(petition_id: UUID):
    """T·∫£i vƒÉn b·∫£n ƒë√£ k√Ω s·ªë (PDF v·ªõi QR code)."""
    pass
```

#### Ch·ªØ K√Ω S·ªë & QR Code

```python
# services/document_signer.py

from PyPDF2 import PdfReader, PdfWriter
import qrcode
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import padding

class DocumentSigner:
    """
    D·ªãch v·ª• ch√®n ch·ªØ k√Ω s·ªë v√† QR code v√†o vƒÉn b·∫£n.
    """
    
    @staticmethod
    def sign_document(petition: Petition, approvers: List[User]) -> str:
        """
        T·∫°o PDF vƒÉn b·∫£n ƒë√£ k√Ω s·ªë.
        
        Returns:
            URL c·ªßa file PDF ƒë√£ k√Ω
        """
        # 1. Render template th√†nh HTML
        html_content = render_template(
            petition.type.template_content,
            petition=petition,
            approvers=approvers
        )
        
        # 2. Chuy·ªÉn HTML ‚Üí PDF
        pdf_bytes = html_to_pdf(html_content)
        
        # 3. T·∫°o QR code x√°c th·ª±c
        verification_url = f"https://esangha.edu.vn/verify/{petition.id}"
        qr_data = {
            "id": str(petition.id),
            "number": petition.petition_number,
            "type": petition.type.code,
            "signed_at": datetime.now().isoformat(),
            "verify_url": verification_url
        }
        qr_image = qrcode.make(json.dumps(qr_data))
        
        # 4. Ch√®n QR code v√†o g√≥c ph·∫£i d∆∞·ªõi PDF
        pdf_with_qr = embed_qr_to_pdf(pdf_bytes, qr_image)
        
        # 5. K√Ω s·ªë (Digital Signature)
        signed_pdf = apply_digital_signature(
            pdf_with_qr,
            signer_id=approvers[-1].id,
            timestamp=datetime.now()
        )
        
        # 6. Upload l√™n storage
        file_url = upload_to_storage(
            signed_pdf, 
            f"petitions/{petition.petition_number}.pdf"
        )
        
        return file_url
```

---

## 4. UI/UX Concept

### 4.1. Tri·∫øt L√Ω Thi·∫øt K·∫ø

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         UNIVERSITY STYLE + BUDDHIST AESTHETICS             ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                            ‚ïë
‚ïë  üéì TRANG TR·ªåNG (Formal)                                   ‚ïë
‚ïë     ‚Ä¢ B·ªë c·ª•c r√µ r√†ng nh∆∞ website ƒë·∫°i h·ªçc                  ‚ïë
‚ïë     ‚Ä¢ Typography chuy√™n nghi·ªáp                            ‚ïë
‚ïë     ‚Ä¢ Hierarchy th√¥ng tin m·∫°ch l·∫°c                        ‚ïë
‚ïë                                                            ‚ïë
‚ïë  üôè UY NGHI√äM (Dignified)                                  ‚ïë
‚ïë     ‚Ä¢ Kh√¥ng animation l√≤e lo·∫πt                            ‚ïë
‚ïë     ‚Ä¢ M√†u s·∫Øc tr·∫ßm, nh√£ nh·∫∑n                              ‚ïë
‚ïë     ‚Ä¢ Kho·∫£ng tr·∫Øng tho√°ng ƒë√£ng                            ‚ïë
‚ïë                                                            ‚ïë
‚ïë  üí° HI·ªÜN ƒê·∫†I (Modern)                                      ‚ïë
‚ïë     ‚Ä¢ Responsive ho√†n h·∫£o                                 ‚ïë
‚ïë     ‚Ä¢ Micro-interactions tinh t·∫ø                          ‚ïë
‚ïë     ‚Ä¢ Performance t·ªëi ∆∞u                                  ‚ïë
‚ïë                                                            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### 4.2. B·∫£ng M√†u (Color Palette)

| M√†u | Hex | √ù nghƒ©a | S·ª≠ d·ª•ng |
|-----|-----|---------|---------|
| üüß **V√†ng Y (Saffron)** | `#FF9933` | TƒÉng ƒëo√†n, thanh t·ªãnh | Header, CTA buttons, accents |
| üü´ **N√¢u ƒê·∫•t (Temple Brown)** | `#8B4513` | Ch√πa chi·ªÅn, b·ªÅn v·ªØng | Sidebar, borders, secondary |
| ‚¨ú **Tr·∫Øng S·∫°ch** | `#FAFAFA` | Trong s√°ng, v√¥ ng√£ | Background ch√≠nh |
| ‚¨õ **ƒêen M·ª±c** | `#1A1A1A` | Ch·ªØ Khmer c·ªï | Text ch√≠nh |
| üü© **Xanh B·ªì ƒê·ªÅ** | `#4CAF50` | TƒÉng tr∆∞·ªüng | Success states |
| üü• **ƒê·ªè C·∫£nh B√°o** | `#E53935` | Kh·∫©n c·∫•p | Error, deadlines |

### 4.3. Typography - ƒêa Ng√¥n Ng·ªØ

```css
/* Font Stack cho Web */
:root {
  /* Ti·∫øng Khmer */
  --font-khmer: 'Noto Sans Khmer', 'Khmer OS', sans-serif;
  
  /* Ti·∫øng Vi·ªát + PƒÅli */
  --font-latin: 'Inter', 'Roboto', sans-serif;
  
  /* Font decorative cho header */
  --font-display: 'Battambang', 'Khmer OS Muol', serif;
}

/* K√≠ch th∆∞·ªõc ch·ªØ */
.text-display { font-size: 2.5rem; }  /* 40px - Hero title */
.text-h1 { font-size: 2rem; }         /* 32px */
.text-h2 { font-size: 1.5rem; }       /* 24px */
.text-body { font-size: 1rem; }       /* 16px */
.text-caption { font-size: 0.875rem; } /* 14px */

/* Ch·∫ø ƒë·ªô cho H√≤a th∆∞·ª£ng (font l·ªõn h∆°n 50%) */
.accessibility-mode {
  --text-multiplier: 1.5;
}
```

### 4.4. H·ªça Ti·∫øt Kbach Khmer

> [!TIP]
> S·ª≠ d·ª•ng h·ªça ti·∫øt **Kbach** (hoa vƒÉn truy·ªÅn th·ªëng Khmer) nh∆∞ ƒëi·ªÉm nh·∫•n tinh t·∫ø, kh√¥ng l·∫°m d·ª•ng.

**V·ªã tr√≠ √°p d·ª•ng:**
- Header banner: Vi·ªÅn h·ªça ti·∫øt hoa sen d·∫°ng line art
- Card borders: G√≥c bo c√≥ h·ªça ti·∫øt nh·∫π
- Dividers: ƒê∆∞·ªùng k·∫ª ngang v·ªõi motif trung t√¢m
- Footer: Band h·ªça ti·∫øt ngang

**Nguy√™n t·∫Øc:**
- ‚úÖ D·∫°ng line art, ƒë∆°n s·∫Øc (one-color)
- ‚úÖ Opacity th·∫•p (10-20%) l√†m background
- ‚úÖ K√≠ch th∆∞·ªõc nh·ªè, tinh t·∫ø
- ‚ùå Kh√¥ng d√πng gradient m√†u
- ‚ùå Kh√¥ng qu√° chi ti·∫øt g√¢y r·ªëi m·∫Øt

### 4.5. Responsive Breakpoints

| Breakpoint | Target Device | Layout |
|------------|---------------|--------|
| `< 640px` | Mobile phone | 1 column, bottom nav |
| `640px - 1024px` | Tablet Portrait | 2 columns, side nav collapsed |
| `1024px - 1440px` | Tablet Landscape / Laptop | 3 columns, side nav expanded |
| `> 1440px` | Desktop | Max-width container, 3+ columns |

---

## 5. Ki·∫øn Tr√∫c K·ªπ Thu·∫≠t

### 5.1. System Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     CLOUD INFRASTRUCTURE                     ‚îÇ
‚îÇ                    (VPS/Cloud Provider)                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ   NGINX     ‚îÇ   ‚îÇ  Next.js    ‚îÇ   ‚îÇ   Django    ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ  (Reverse   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Frontend   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Backend    ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ   Proxy)    ‚îÇ   ‚îÇ  (SSR/SSG)  ‚îÇ   ‚îÇ  (REST API) ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ                   ‚îÇ              ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ                   ‚îÇ              ‚îÇ
‚îÇ         ‚ñº                ‚ñº                   ‚ñº              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ   CDN       ‚îÇ   ‚îÇ   Redis     ‚îÇ   ‚îÇ PostgreSQL  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ  (Static)   ‚îÇ   ‚îÇ  (Cache)    ‚îÇ   ‚îÇ (Database)  ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ   MinIO     ‚îÇ   ‚îÇ  Celery     ‚îÇ   ‚îÇ  Sentry     ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ (S3 Storage)‚îÇ   ‚îÇ  (Tasks)    ‚îÇ   ‚îÇ (Monitoring)‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 5.2. Tech Stack Chi Ti·∫øt

| Layer | Technology | L√Ω do ch·ªçn |
|-------|------------|------------|
| **Frontend** | Next.js 14 (App Router) | SSR/SSG cho SEO, React ecosystem |
| **Styling** | Tailwind CSS + shadcn/ui | Rapid development, consistent design |
| **State** | Zustand / TanStack Query | Lightweight, server-state focused |
| **Backend** | Django 5 + Django REST Framework | Mature, batteries-included, Python |
| **Auth** | Django Allauth + JWT | Social login ready, secure |
| **Database** | PostgreSQL 16 | JSONB support, robust |
| **Cache** | Redis | Session, API cache |
| **Storage** | MinIO (S3-compatible) | Self-hosted, cost-effective |
| **Task Queue** | Celery + Redis | Background jobs, scheduled tasks |
| **Search** | PostgreSQL Full-Text / Meilisearch | ƒê·ªß cho quy m√¥ hi·ªán t·∫°i |

### 5.3. API Design

```yaml
# OpenAPI 3.0 Spec (excerpt)

openapi: 3.0.3
info:
  title: E-Sangha API
  version: 1.0.0

paths:
  /api/v1/auth/login:
    post:
      summary: ƒêƒÉng nh·∫≠p
      tags: [Authentication]
      
  /api/v1/users/me:
    get:
      summary: L·∫•y th√¥ng tin user hi·ªán t·∫°i
      tags: [Users]
      
  /api/v1/monks:
    get:
      summary: Danh s√°ch TƒÉng sinh
      tags: [Monks]
    post:
      summary: T·∫°o h·ªì s∆° TƒÉng sinh m·ªõi
      tags: [Monks]
      
  /api/v1/monks/{id}/vassa:
    get:
      summary: L·∫•y th√¥ng tin tu·ªïi h·∫°
      tags: [Monks]
      
  /api/v1/petitions:
    get:
      summary: Danh s√°ch ƒë∆°n t·ª´
      tags: [Petitions]
    post:
      summary: T·∫°o ƒë∆°n m·ªõi
      tags: [Petitions]
      
  /api/v1/petitions/{id}/approve:
    post:
      summary: Ph√™ duy·ªát ƒë∆°n
      tags: [Petitions]
      
  /api/v1/calendar/khmer:
    get:
      summary: L·ªãch Chhankitek
      tags: [Calendar]
```

### 5.4. Database Schema Overview

```mermaid
erDiagram
    users ||--o| monk_profiles : has
    users ||--o| layperson_profiles : has
    users ||--o{ petitions : creates
    users ||--o{ petition_history : acts_on
    
    petition_types ||--o{ petitions : categorizes
    petitions ||--o{ petition_history : has
    
    courses ||--o{ enrollments : has
    users ||--o{ enrollments : enrolls_in
    enrollments ||--o{ grades : has
    
    users {
        uuid id PK
        string email
        string user_type
        boolean is_active
    }
    
    monk_profiles {
        uuid id PK
        uuid user_id FK
        string dharma_name_khmer
        date bhikkhu_date
        int vassa
    }
    
    petitions {
        uuid id PK
        uuid type_id FK
        uuid requester_id FK
        string status
        text content
    }
    
    courses {
        uuid id PK
        string code
        string name
        int credits
    }
    
    enrollments {
        uuid id PK
        uuid user_id FK
        uuid course_id FK
        string semester
    }
    
    grades {
        uuid id PK
        uuid enrollment_id FK
        decimal score
        string grade_letter
    }
```

---

## 6. L·ªô Tr√¨nh Tri·ªÉn Khai

### 6.1. Ph√¢n Pha Tri·ªÉn Khai

```mermaid
gantt
    title L·ªô Tr√¨nh E-Sangha Web Portal
    dateFormat  YYYY-MM-DD
    
    section Phase 1: Foundation
    Setup Infrastructure     :a1, 2026-02-01, 2w
    Backend Core (Auth, Users) :a2, after a1, 4w
    Frontend Shell (Layout)   :a3, after a1, 3w
    
    section Phase 2: Core Features
    H·ªì S∆° TƒÉng Sinh          :b1, after a2, 4w
    H·ªçc V·ª• C∆° B·∫£n            :b2, after b1, 4w
    Th√¥ng B√°o & L·ªãch         :b3, after b1, 3w
    
    section Phase 3: Advanced
    E-Approval Workflow      :c1, after b2, 4w
    Th∆∞ Vi·ªán S·ªë              :c2, after b3, 4w
    Public Portal            :c3, after b3, 3w
    
    section Phase 4: Polish
    UAT & Bug Fixes          :d1, after c1, 3w
    Performance Tuning       :d2, after d1, 2w
    Go Live                  :milestone, after d2, 1d
```

### 6.2. Chi Ti·∫øt T·ª´ng Phase

#### Phase 1: Foundation (6 tu·∫ßn)

| Task | M√¥ t·∫£ | Output |
|------|-------|--------|
| **Infra Setup** | VPS, Docker, CI/CD, SSL | Production-ready environment |
| **Backend Core** | Django project, Auth, User model | API `/auth/*`, `/users/*` |
| **Frontend Shell** | Next.js setup, Layout, Theme | Base UI components |
| **Design System** | Tailwind config, shadcn components | UI Kit documentation |

#### Phase 2: Core Features (8 tu·∫ßn)

| Task | M√¥ t·∫£ | Output |
|------|-------|--------|
| **H·ªì S∆° TƒÉng Sinh** | CRUD Profile, OCR integration | Full profile management |
| **Vassa Calculator** | Khmer calendar, auto-calculation | Accurate vassa display |
| **H·ªçc V·ª•** | Courses, Enrollments, Grades | Academic management |
| **Dashboard** | Role-based dashboards | Personalized home |

#### Phase 3: Advanced Features (8 tu·∫ßn)

| Task | M√¥ t·∫£ | Output |
|------|-------|--------|
| **E-Approval** | Petition workflow, Digital signature | Full workflow |
| **Th∆∞ Vi·ªán** | Document storage, Search | Digital library |
| **Public Portal** | SSG pages, SEO, News | Public website |
| **Calendar** | Chhankitek display, Events | Interactive calendar |

#### Phase 4: Polish & Launch (5 tu·∫ßn)

| Task | M√¥ t·∫£ | Output |
|------|-------|--------|
| **UAT** | User acceptance testing v·ªõi H·ªçc vi·ªán | Bug reports, feedback |
| **Performance** | Caching, optimization, CDN | Fast loading |
| **Documentation** | User guides, API docs | Complete docs |
| **Training** | Train admin, teachers | Ready users |
| **Go Live** | Production deployment | üéâ Launch |

---

### 6.3. ∆Ø·ªõc L∆∞·ª£ng Nh√¢n S·ª±

| Vai tr√≤ | S·ªë l∆∞·ª£ng | Th·ªùi gian | Nhi·ªám v·ª• ch√≠nh |
|---------|----------|-----------|----------------|
| **Tech Lead** | 1 | Full-time | Architecture, Code review |
| **Backend Dev** | 1-2 | Full-time | Django API development |
| **Frontend Dev** | 1-2 | Full-time | Next.js UI development |
| **UI/UX Designer** | 1 | Part-time | Design system, Figma |
| **DevOps** | 1 | Part-time | Infrastructure, CI/CD |
| **QA** | 1 | Part-time | Testing, UAT support |

**T·ªïng th·ªùi gian ∆∞·ªõc t√≠nh:** 6-7 th√°ng (v·ªõi team 4-5 ng∆∞·ªùi full-time)

---

> [!CAUTION]
> **R·ªßi ro ch√≠nh c·∫ßn qu·∫£n l√Ω:**
> 1. Thu·∫≠t to√°n l·ªãch Chhankitek ph·ª©c t·∫°p - c·∫ßn th·ªùi gian R&D
> 2. OCR ch·ªØ Khmer c·ªï - c√≥ th·ªÉ c·∫ßn fine-tune model
> 3. Thay ƒë·ªïi y√™u c·∫ßu t·ª´ Ban Gi√°m hi·ªáu - c·∫ßn freeze scope s·ªõm
> 4. Internet kh√¥ng ·ªïn ƒë·ªãnh t·∫°i H·ªçc vi·ªán - c·∫ßn offline fallback cho critical features

---

## Ph·ª• L·ª•c

### A. Tham Kh·∫£o Thi·∫øt K·∫ø

- [RMIT University](https://www.rmit.edu.vn/) - M·∫´u portal ƒë·∫°i h·ªçc chu·∫©n
- [FPT University](https://daihoc.fpt.edu.vn/) - Portal ti·∫øng Vi·ªát t·ªët
- [MCU Thailand](https://www.mcu.ac.th/) - ƒê·∫°i h·ªçc Ph·∫≠t gi√°o tham kh·∫£o

### B. C√¥ng Ngh·ªá Khmer Calendar

- API tham kh·∫£o: https://khmer-calendar.github.io/
- Library: `khmer-calendar-date-time` (npm)
- Research paper: "Algorithms for Khmer Calendar Conversion"

---

*T√†i li·ªáu ƒë∆∞·ª£c so·∫°n th·∫£o b·ªüi AI Solution Architect*
*Ng√†y: 08/01/2026*
*Version: 1.0*
